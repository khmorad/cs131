 1000  cd cs131
 1001  ls
 1002  cd a3
 1003  ls
 1004  head a3.txt 
 1005  cat a3.txt 
 1006  head 2019-08.csv 
 #1 Identify the top 10 pickup locations that yielded the highest average
 1021  cut -d, -f8,18 2019-08.csv | tail -n +2 | sort -t, -k1,1 | uniq -c | sort -rn | head -n 10 > a3.txt
 1059  sed -i 's/,2.5//' a3.txt 
 #2 251722 161.0
 #3 getting col 4 (# of passengers) and 14 (tip amount) 
 1064  grep '2019-08' 2019-08.csv | cut -d',' -f4,14 > passenger_tip_data.txt
 1065  head passenger_tip_data.txt 

 1067  awk -F',' '{ passengers[$1] += 1; total_tip[$1] += $2 } END { for (p in passengers) print p, total_tip[p]/passengers[p] }' passenger_tip_data.txt > averaged_passenger_tip_data.txt
 1068  head averaged_passenger_tip_data.txt 
 1069  gnuplot -persist <<-EOF
set terminal svg size 800,600
set output 'a3t3.svg'
set title "Passengers and Average Tip Amount"
set xlabel "Number of passengers"
set ylabel "Average Tip Amount"
set boxwidth 0.5
set style fill solid
plot 'averaged_passenger_tip_data.txt' with boxes title "Average Tip Amount"
EOF



 #4 [Use Gnuplot] Plot the correlation between the travel distance and the total amount paid
 1070  ls
 1071  grep '2019-08' 2019-08.csv | cut -d',' -f5,17 > distance_amount_data.txt
 1072  awk -F',' '{ distances[$1] += 1; total_amount[$1] += $2 } END { for (d in distances) print d, total_amount[d]/distances[d] }' distance_amount_data.txt > averaged_distance_amount_data.txt
 1073  ls
 1074  head averaged_distance_amount_data.txt 

 1079  gnuplot -persist <<-EOF
set terminal svg size 800,600
set output 'a3t4.svg'
set xlabel "Travel Distance"
set ylabel "Total Amount Paid"
plot 'averaged_distance_amount_data.txt' with points pointtype 7 pointsize 0.5
EOF
 1080  ls
 1081  history > cmds.log
